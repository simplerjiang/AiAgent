# Task Report

## Task
- ID: MANUAL
- Title: Add operational rules and clarify goals
- Timestamp: 20260214-113007

## English (For Agents)
### Summary
- Added a new operational rule for Edge MCP UI verification.
- Verified the 资讯影响 panel renders via Edge MCP with backend-served frontend.

### Changes
- Updated .github/copilot-instructions.md with a new Edge MCP rule.

### Tests (Run in Order)
1) Unit tests:
   - Command: dotnet test backend/SimplerJiangAiAgent.Api.Tests/SimplerJiangAiAgent.Api.Tests.csproj
   - Result: Pass (23 tests)
2) Unit tests (frontend):
   - Command: cd frontend && npm run test:unit
   - Result: Pass (23 tests, ECharts width/height warnings)
3) Edge MCP (UI check):
   - Browser: msedge
   - Steps:
     - Start backend on http://127.0.0.1:5120 (served dist)
     - Connect MCP server on http://localhost:8932
     - Open http://127.0.0.1:5120/, go to 股票信息, query sh600000
     - Verify 资讯影响 is visible and capture screenshot
   - Evidence: .automation/reports/edge-mcp-screenshot-2026-02-14T03-48-12-024Z.png
   - Trace/Video: .automation/reports/edge-mcp-20260214-114028/
   - Result: Pass (资讯影响 visible)

### Issues / Follow-ups
- Backend logs show EF Core decimal precision warnings; no runtime errors observed.

## 中文（给你看的）
### 摘要
- 新增 Edge MCP UI 验证规则。
- 使用 Edge MCP 验证 资讯影响 面板可见（后端托管前端）。

### 修改内容
- 更新 .github/copilot-instructions.md 加入新的 Edge MCP 规则。

### 测试（按顺序）
1) 单元测试：
   - 命令：dotnet test backend/SimplerJiangAiAgent.Api.Tests/SimplerJiangAiAgent.Api.Tests.csproj
   - 结果：通过（23 条）
2) 前端单元测试：
   - 命令：cd frontend && npm run test:unit
   - 结果：通过（23 条，ECharts 宽高告警）
3) Edge MCP（UI 检查）：
   - 浏览器：msedge
   - 步骤：
     - 后端运行于 http://127.0.0.1:5120（托管 dist）
     - MCP 连接 http://localhost:8932
     - 打开 http://127.0.0.1:5120/，进入股票信息，查询 sh600000
     - 确认 资讯影响 可见并截图
   - 证据：.automation/reports/edge-mcp-screenshot-2026-02-14T03-48-12-024Z.png
   - Trace/Video：.automation/reports/edge-mcp-20260214-114028/
   - 结果：通过（资讯影响 可见）

### 问题 / 后续
- 后端日志出现 EF Core decimal 精度警告；未见运行时错误。
